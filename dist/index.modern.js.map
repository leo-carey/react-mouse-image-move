{"version":3,"file":"index.modern.js","sources":["../src/components/ChasingElement/index.tsx","../src/components/MouseContainer/index.tsx"],"sourcesContent":["import React from \"react\";\nimport IChasingElement from \"../../interfaces/IChasingElement\";\n\nconst ChasingElement: React.FC<IChasingElement> = ({ styles, ...props }) => {\n  return (\n    <div style={styles} {...props}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default ChasingElement;\n","import React, { useState, useRef, useEffect } from 'react'\r\nimport ChasingElement from '../ChasingElement'\r\nimport IElementChildProperties from '../../interfaces/IElementChildProperties'\r\nimport IMouseContainer from '../../interfaces/IMouseContainer'\r\n\r\nconst MouseContainer: React.FC<IMouseContainer> = ({chasingElement, styles, options, ...props}) => {\r\n    const wrapperElement = useRef(null)\r\n\r\n    const initElementChildProperties: IElementChildProperties = {\r\n        width: 0,\r\n        height: 0,\r\n        left: 0,\r\n        top: 0,\r\n        transitionTimeout: null,\r\n        updateCall: 0\r\n    }\r\n\r\n    const defaultStyles = {\r\n        flex: 1,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    }\r\n\r\n    const [style, setStyle] = useState(chasingElement.props.styles)\r\n    const [elementChildProperties, setElementChildProperties] = useState(initElementChildProperties)\r\n    \r\n    const defaultSettings = {\r\n        max: 30,\r\n        perspective: 1000,\r\n        easing: 'cubic-bezier(.03,.98,.52,.99)',\r\n        scale: 1.1,\r\n        speed: 1000,\r\n        axis: null,\r\n        reset: true\r\n    }\r\n\r\n    const settings = {\r\n        ...defaultSettings,\r\n        ...options,\r\n    }\r\n\r\n    useEffect(() => {}, [])\r\n    \r\n    useEffect(() => {\r\n        return () => {\r\n            elementChildProperties.transitionTimeout && clearTimeout(elementChildProperties.transitionTimeout)\r\n            cancelAnimationFrame(elementChildProperties.updateCall)\r\n        }\r\n    }, [elementChildProperties])\r\n\r\n    const updateChildPosition = (element: any) => {\r\n        const rect = element.currentTarget.getBoundingClientRect()\r\n\r\n        setElementChildProperties({\r\n            ...elementChildProperties,\r\n            width: element.currentTarget.offsetWidth,\r\n            height: element.currentTarget.offsetHeight,\r\n            left: rect.left,\r\n            top: rect.top\r\n        })\r\n    }\r\n\r\n    const setTransition = () => {\r\n        setStyle({\r\n            ...style,\r\n            transition: `${settings.speed}ms ${settings.easing}`\r\n        })\r\n    }\r\n\r\n    const getValues = (e: any) => {\r\n        const x = (e.nativeEvent.clientX - elementChildProperties.left) / elementChildProperties.width\r\n        const y = (e.nativeEvent.clientY - elementChildProperties.top) / elementChildProperties.height\r\n        const _x = Math.min(Math.max(x, 0), 1)\r\n        const _y = Math.min(Math.max(y, 0), 1)\r\n        const tiltX = (settings.max / 2 - _x * settings.max).toFixed(2)\r\n        const tiltY = (_y * settings.max -   settings.max / 2).toFixed(2)\r\n        const percentageX = _x * 100\r\n        const percentageY = _y * 100\r\n\r\n        return {\r\n            tiltX,\r\n            tiltY,\r\n            percentageX,\r\n            percentageY\r\n        }\r\n    }\r\n\r\n    const update = (e: any) => {\r\n        let values = getValues(e)\r\n\r\n        setStyle({\r\n            ...style,\r\n            transform: `\r\n                perspective(${settings.perspective}px)\r\n                rotateX(${settings.axis === 'x' ? 0 : values.tiltY}deg)\r\n                rotateY(${settings.axis === 'y' ? 0 : values.tiltX}deg)\r\n                scale3d(${settings.scale}, ${settings.scale}, ${settings.scale})`\r\n        })\r\n\r\n        elementChildProperties.updateCall = null\r\n    }\r\n\r\n    const reset = () => {\r\n        window.requestAnimationFrame(() => {\r\n            setStyle({\r\n                ...style,\r\n                transform: `\r\n                    perspective(1000px)\r\n                    rotateX(0deg)\r\n                    rotateY(0deg)\r\n                    scale3d(1, 1, 1)\r\n                `\r\n            })\r\n        })\r\n    }\r\n\r\n    const handleMouseEnter = (e: any) => {\r\n        updateChildPosition(e)\r\n        setTransition()\r\n    }\r\n\r\n    const handleMouseMove = (e: any) => {\r\n        e.persist()\r\n\r\n        if(elementChildProperties.updateCall !== null) {\r\n            cancelAnimationFrame(elementChildProperties.updateCall)\r\n        }\r\n\r\n        elementChildProperties.updateCall = requestAnimationFrame(update.bind(wrapperElement, e))\r\n    }\r\n\r\n    const handleMouseLeave = () => {\r\n        setTransition()\r\n\r\n        if (settings.reset) {\r\n            reset()\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div\r\n            ref={wrapperElement}\r\n            style={{\r\n                ...defaultStyles,\r\n                ...styles\r\n            }}\r\n            onMouseEnter={handleMouseEnter}\r\n            onMouseMove={handleMouseMove}\r\n            onMouseLeave={handleMouseLeave}\r\n            {...props}\r\n        >\r\n            <ChasingElement styles={style}>\r\n                {chasingElement}\r\n            </ChasingElement>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MouseContainer\r\n"],"names":["ChasingElement","styles","props","React","style","children","MouseContainer","chasingElement","options","wrapperElement","useRef","initElementChildProperties","width","height","left","top","transitionTimeout","updateCall","defaultStyles","flex","display","alignItems","justifyContent","useState","setStyle","elementChildProperties","setElementChildProperties","defaultSettings","max","perspective","easing","scale","speed","axis","reset","settings","useEffect","clearTimeout","cancelAnimationFrame","updateChildPosition","element","rect","currentTarget","getBoundingClientRect","offsetWidth","offsetHeight","setTransition","transition","getValues","e","x","nativeEvent","clientX","y","clientY","_x","Math","min","_y","tiltX","toFixed","tiltY","percentageX","percentageY","update","values","transform","window","requestAnimationFrame","handleMouseEnter","handleMouseMove","persist","bind","handleMouseLeave","ref","onMouseEnter","onMouseMove","onMouseLeave"],"mappings":"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"}